enable
configure terminal

! ------------------- Basic Settings -------------------
hostname Access4
vtp mode transparent
spanning-tree mode rapid-pvst
spanning-tree extend system-id

! --------   DHCP Snooping + IP Source Guard   -------------------
ip dhcp snooping
ip dhcp snooping vlan 10,20,30,40,50
ip dhcp snooping verify mac-address

! ------------------- Uplinks to Dist1 & Dist2 (Trusted Trunks) -------------------
interface range Ethernet3/1 - 2
 description TRUNK TO Dist1 & Dist2
switchport trunk encapsulation dot1q
 switchport mode trunk
 switchport trunk allowed vlan all
 ip dhcp snooping trust
 spanning-tree guard root
 no shutdown
exit

interface Ethernet3/3
 description SPARE TRUNK
 shutdown
exit

! ------------------- VLAN 40 – Guest Department (extra ports for 30+ users) -------------------
interface range Ethernet0/1 - 3
 description GUEST DEPARTMENT – VLAN 40 (extra ports)
 switchport mode access
 switchport access vlan 40
 ip verify source
 ip dhcp snooping limit rate 10
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 switchport port-security
 spanning-tree portfast
 spanning-tree bpduguard enable
 no shutdown
exit

! ------------------- VLAN 50 – Management Department (extra ports) -------------------
interface range Ethernet1/1 - 3
 description MANAGEMENT DEPARTMENT – VLAN 50 (extra ports)
 switchport mode access
 switchport access vlan 50
 ip verify source
 ip dhcp snooping limit rate 10
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 switchport port-security
 spanning-tree portfast
 spanning-tree bpduguard enable
 no shutdown
exit

! ------------------- Mixed/Extra ports – Guest VLAN 40 (for growth) -------------------
interface range Ethernet2/1 - 3
 description EXTRA GUEST PORTS – VLAN 40
 switchport mode access
 switchport access vlan 40
 ip verify source
 ip dhcp snooping limit rate 10
 switchport port-security maximum 2
 switchport port-security mac-address sticky
 switchport port-security violation restrict
 switchport port-security
 spanning-tree portfast
 spanning-tree bpduguard enable
 no shutdown
exit

end
write memory
show ip dhcp snooping
show ip verify source
show port-security interface Ethernet0/1
show spanning-tree summary
show interfaces trunk
show interfaces status